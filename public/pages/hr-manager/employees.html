<!DOCTYPE html>
<html>
<head>
<title>HR Employees</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<style>
* {margin:0;padding:0;box-sizing:border-box;}
body {font-family:Arial,sans-serif;background:#f5f7fa;display:flex;}
.sidebar {width:250px;background:#1e3a8a;color:white;padding:20px;height:100vh;}
.logo {font-size:24px;font-weight:bold;margin-bottom:30px;}
.menu-item {display:block;padding:15px;color:#bfdbfe;text-decoration:none;margin:5px 0;}
.menu-item.active {background:#3b82f6;border-radius:8px;}
.main-content {flex:1;padding:30px;overflow:auto;}
.top-header {background:white;padding:25px;border-radius:12px;margin-bottom:25px;box-shadow:0 4px 12px rgba(0,0,0,0.1);}
.top-header h1 {color:#1e293b;font-size:28px;margin-bottom:8px;}
.content {background:white;padding:30px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.1);}
table {width:100%;border-collapse:collapse;font-size:14px;}
th {background:#f8fafc;padding:15px;text-align:left;font-weight:600;color:#475569;border-bottom:2px solid #e2e8f0;}
td {padding:15px;border-bottom:1px solid #f1f5f9;}
tr:hover {background:#f8fafc;}
.status {padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600;}
.status-active {background:#dcfce7;color:#166534;}
.no-data {text-align:center;padding:60px;color:#64748b;}
.no-data i {font-size:64px;color:#d1d5db;margin-bottom:20px;display:block;}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<div class="sidebar">
  <div class="logo">Payroll Pro</div>
  <a href="#" class="menu-item active"><i class="fas fa-users"></i> Employees</a>
  <a href="../dashboard.html" class="menu-item"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
</div>

<div class="main-content">
  <div class="top-header">
    <h1><i class="fas fa-users"></i> Employee Management</h1>
    <p>Manage your employees and their profiles</p>
  </div>
  
  <div class="content">
    <div id="employees-container">
      <div class="no-data">
        <i class="fas fa-users-slash"></i>
        <h3>No Employees Found</h3>
        <p>This organization has no employees yet</p>
      </div>
    </div>
  </div>
</div>

<script>
(async function(){
  try {
    console.log('Loading employees...');
    const res = await fetch('/api/employees');
    const data = await res.json();
    console.log('API Response:', data);
    
    const container = document.getElementById('employees-container');
    
    if(!data.employees || data.employees.length === 0) {
      container.innerHTML = `
        <div class="no-data">
          <i class="fas fa-users-slash"></i>
          <h3>No Employees Found</h3>
          <p>This organization has no employees yet<br><small>Click "Add Employee" to create first employee</small></p>
        </div>
      `;
      return;
    }
    
    container.innerHTML = `
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Department</th>
            <th>Salary</th>
            <th>Status</th>
            <th>Joined</th>
          </tr>
        </thead>
        <tbody>
          ${data.employees.map(emp => `
            <tr>
              <td><strong>${emp.employeeId || 'N/A'}</strong></td>
              <td>${emp.name || 'N/A'}</td>
              <td>${emp.email || 'N/A'}</td>
              <td>${emp.department || 'N/A'}</td>
              <td>â‚¹${(emp.basicSalary || 0).toLocaleString()}</td>
              <td><span class="status status-active">${emp.status || 'Active'}</span></td>
              <td>${new Date(emp.dateOfJoining || Date.now()).toLocaleDateString('en-IN')}</td>
            </tr>
          `).join('')}
        </tbody>
      </table>
    `;
    
  } catch(error) {
    console.error('Error:', error);
    document.getElementById('employees-container').innerHTML = `
      <div style="text-align:center;padding:60px;color:#dc2626;">
        <i class="fas fa-exclamation-triangle" style="font-size:64px;margin-bottom:20px;"></i>
        <h3>Error Loading Data</h3>
        <p>Check console (F12) for details</p>
      </div>
    `;
  }
})();
</script>
</body>
</html>
